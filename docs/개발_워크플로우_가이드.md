# TechBuddy 개발 워크플로우 가이드

**작성일**: 2025-11-17  
**작성자**: 윤종호  
**버전**: v1.0  
**프로젝트**: TechBuddy MVP

---

## 📋 목차

1. [Linear 활용](#1-linear-활용)
2. [브랜치 전략](#2-브랜치-전략)
3. [브랜치별 보호 규칙](#3-브랜치별-보호-규칙)
4. [역할별 일일 작업 프로세스](#4-역할별-일일-작업-프로세스)
5. [커밋 컨벤션](#5-커밋-컨벤션)
6. [코드 리뷰 가이드](#6-코드-리뷰-가이드)
7. [향후 계획](#7-향후-계획)

---

## 1. Linear 활용

### 1.1 목적
```
* 5인 팀의 효율적인 프로젝트 관리 및 협업 강화
* 모든 개발 작업의 시작점으로 활용
* 이슈 기반 개발 문화 확립
```

### 1.2 기본 사용 규칙
* **모든 작업은 Linear 이슈 생성부터 시작**
* 이슈 ID 형식: `TECH-000` (TechBuddy의 약자)
* 이슈는 계층 구조와 타입에 따라 작성

### 1.3 이슈 계층 구조 및 타입

#### Level 1: `[EPIC]`
* **정의**: 여러 단계의 작업이 필요한 크고 복합적인 기능 또는 목표
* **예시**: `[EPIC] 커뮤니티 기능 구현`, `[EPIC] 프로젝트 관리 도구 개발`
* **설명**: Epic은 하나 이상의 Phase 또는 Task로 구성됩니다. 프로젝트의 큰 그림을 나타냅니다.

#### Level 2: `[Phase N]`
* **정의**: Epic을 완수하기 위한 순차적 또는 논리적 단계
* **예시**: `[Phase 1] 커뮤니티 기반 구축`, `[Phase 2] 프로젝트 관리 핵심 기능`
* **설명**: Epic의 하위 이슈로 생성하며, 특정 기간 동안의 작업 단위를 명확히 합니다.

#### Level 3: 일반 타입 (`feature`, `fix` 등)
* **정의**: 개발자가 실제로 수행하는 가장 작은 단위의 작업
* **예시**: `feature: 등급별 게시판 API 개발`, `fix: 로그인 버그 수정`
* **설명**: Epic 또는 Phase의 하위 이슈로 생성될 수 있으며, 커밋 컨벤션의 타입을 접두사로 사용

#### 타입 종류
* `feature`: 새로운 기능 추가
* `fix`: 버그 수정
* `docs`: 문서 수정 (API 명세서, README 등)
* `style`: 코드 포맷팅, 리팩토링 (동작 변경 없음)
* `test`: 테스트 코드 관련 작업
* `chore`: 기타 작업 (빌드, 설정, 의존성 업데이트)

---

## 2. 브랜치 전략

### 2.1 현재 전략: 3-Branch Strategy

TechBuddy는 MVP 단계로 **소수 인원(5명)** 작업이므로 3 브랜치 전략을 채택합니다.

```
dev (개발) → test (테스트) → main (프로덕션)
```

> **참고**: 향후 팀 규모 확장 시 Feature Branch 전략으로 전환 예정

### 2.2 브랜치별 용도

| 브랜치 | 용도 | 환경 | 자동 배포 |
|--------|------|------|----------|
| `dev` | 모든 개발 작업 | 로컬 개발 환경 | ❌ |
| `test` | 테스트 서버 배포 | Railway (Test) | ✅ |
| `main` | 프로덕션 배포 | Railway (Production) | ✅ |

#### dev 브랜치
* 모든 개발 작업이 이루어지는 중심 브랜치
* 직접 push 가능 (보호 규칙 없음)
* 팀원들이 공동으로 작업

#### test 브랜치
* 개발 완료 후 테스트 서버에 배포
* QA 및 통합 테스트 진행
* **직접 push 금지**, PR 필수

#### main 브랜치
* 실제 서비스 배포용 (프로덕션)
* **직접 push 금지**, PR + 코드 리뷰 필수
* 항상 안정적인 상태 유지

### 2.3 전략 특징
* ✅ Feature 브랜치 없이 dev 브랜치에서 직접 작업
* ✅ Pull Request를 통한 브랜치 간 merge 필수
* ✅ **Squash and Merge**로 깔끔한 히스토리 유지
* ⚠️ MVP 완료 후 Feature Branch 전략 도입 예정

---

## 3. 브랜치별 보호 규칙

### 3.1 보호 규칙 요약

| 브랜치 | 직접 Push | PR 필수 | 리뷰 필수 | Merge 방식 | 주요 설정 |
|--------|-----------|---------|-----------|-----------|----------|
| `dev` | ✅ | ❌ | ❌ | - | 보호 규칙 없음 |
| `test` | ❌ | ✅ | ❌ | Squash | PR 필수 |
| `main` | ❌ | ✅ | ✅ (PM) | Squash | PR + 리뷰 필수 |

### 3.2 Branch Protection 설정 방법

#### ❓ 왜 필요한가?
* ✅ 직접 push로 인한 실수 방지
* ✅ 코드 리뷰 프로세스 확립으로 코드 품질 향상
* ✅ 팀 협업 규칙 확립 및 안정적인 배포

#### 📝 GitHub 설정 경로
1. Repository → **Settings** → **Branches**
2. **Add branch protection rule** 클릭
3. 아래 설정 적용

#### test 브랜치 필수 설정
```yaml
Branch name pattern: test

필수 설정:
☑️ Require a pull request before merging
☑️ Require conversation resolution before merging
☑️ Require linear history
```

#### main 브랜치 필수 설정
```yaml
Branch name pattern: main

필수 설정:
☑️ Require a pull request before merging
   ☑️ Require approvals (1명 - PM 윤종호)
   ☑️ Dismiss stale pull request approvals when new commits are pushed
☑️ Require conversation resolution before merging
☑️ Require linear history
☑️ Do not allow bypassing the above settings (Admin 포함)
```

#### 📚 각 설정 항목 설명

| 설정 | 설명 |
|------|------|
| `Require a pull request before merging` | 직접 Push 금지, PR을 통해서만 merge 가능 |
| `Require approvals` | PR merge 전 지정된 수의 리뷰어 승인 필요 |
| `Dismiss stale pull request approvals` | 승인 후 새 커밋 추가 시 재승인 필요 |
| `Require conversation resolution` | 모든 PR 코멘트가 해결되어야 merge 가능 |
| `Require linear history` | Merge commit 생성 금지, Squash만 허용 |

---

## 4. 역할별 일일 작업 프로세스

### 4.1 개발자 일일 워크플로우 (공통)

**역할**: 프론트엔드(박지승), 백엔드(윤종호), 디자이너, 앱 개발자(박시형)

```bash
# ========== Step 1: 오늘 할 일 확인 ==========
# Linear 대시보드에서 오늘 할당된 이슈 확인
# 이슈 ID와 작업 내용 숙지

# ========== Step 2: 작업 시작 ==========
git checkout dev              # dev 브랜치로 이동
git pull origin dev           # ⚠️ 중요: 작업 시작 전 항상 최신화!

# ========== Step 3: 개발 작업 ==========
# ✨ Tip: VS Code에서 Prettier 자동 포맷팅 설정 권장
# 코드 작성...

# ========== Step 4: 커밋 & 푸시 ==========
git add .
git commit -m "feature: 등급별 게시판 목록 조회 API, TECH-042"
git push origin dev

# ========== Step 5: PR 생성 (dev → test) ==========
# GitHub에서 Pull Request 생성
# - 제목: "[TECH-042] 등급별 게시판 목록 조회 API"
# - 내용: 주요 변경사항, 테스트 방법 작성

# ========== Step 6: 로컬 테스트 ==========
# Railway Test 서버 자동 배포 대기 (약 2-3분)
# Test 서버에서 동작 확인

# ========== Step 7: PM에게 리뷰 요청 ==========
# Slack or Linear 코멘트로 리뷰 요청
```

### 4.2 PM (윤종호) 워크플로우

#### 아침 루틴
```bash
# 1. Linear 대시보드 확인
#    - 진행 중인 이슈 현황 파악
#    - 새로운 이슈 생성 및 팀원에게 할당

# 2. GitHub PR 확인
#    - 대기 중인 PR 리뷰
#    - 코드 리뷰 및 피드백
```

#### 개발 작업
```bash
# PM도 팀원과 동일하게 dev 브랜치에서 작업
git checkout dev
git pull origin dev

# 긴급 수정(Hotfix)이 필요한 경우
git checkout -b hotfix/TECH-XXX main
# 수정 후
git push origin hotfix/TECH-XXX
# PR: hotfix/TECH-XXX → main
```

#### PR 리뷰 & 배포
```bash
# test 서버 QA 진행
# ✅ 기능 동작 확인
# ✅ 버그 없는지 확인
# ✅ 성능 이슈 없는지 확인

# PR 리뷰 후 Squash and Merge
# main 브랜치로 merge
# Railway Production 자동 배포 확인
```

### 4.3 Pull Request 워크플로우

#### dev → test PR
```
1. dev 브랜치에서 작업 완료
2. GitHub에서 PR 생성 (base: test, compare: dev)
3. PR 제목: "[TECH-042] 등급별 게시판 목록 조회 API"
4. PR 설명 작성:
   - 주요 변경사항
   - 테스트 방법
   - 스크린샷 (UI 작업 시)
5. 로컬 테스트 완료 후 "Squash and merge"
6. Railway Test 서버 자동 배포 대기
7. Test 서버에서 QA 진행
```

#### test → main PR
```
1. Test 서버 QA 완료
2. GitHub에서 PR 생성 (base: main, compare: test)
3. PR 제목: "[TECH-042] 등급별 게시판 목록 조회 API"
4. PR 설명 작성:
   - 주요 변경사항
   - Test 서버 테스트 결과
   - 특이사항
5. PM(윤종호)에게 리뷰 요청
6. 리뷰 승인 후 "Squash and merge"
7. Railway Production 자동 배포 확인
8. Production 서버 동작 확인
```

---

## 5. 커밋 컨벤션

### 5.1 커밋 메시지 형식

```bash
<타입>: <작업내용>, <Linear ID>
```

#### 예시
```bash
git commit -m "feature: 회원가입 API 개발, TECH-012"
git commit -m "fix: 로그인 버그 수정, TECH-034"
git commit -m "docs: API 명세서 업데이트, TECH-050"
git commit -m "style: Prettier 적용, TECH-051"
```

### 5.2 타입 종류

| 타입 | 설명 | 예시 |
|------|------|------|
| `feature` | 새로운 기능 추가 | `feature: 등급별 게시판 API, TECH-042` |
| `fix` | 버그 수정 | `fix: 로그인 에러 처리, TECH-056` |
| `docs` | 문서 수정 | `docs: README 업데이트, TECH-060` |
| `style` | 코드 포맷팅, 리팩토링 | `style: ESLint 적용, TECH-061` |
| `refactor` | 코드 리팩토링 (기능 변경 없음) | `refactor: API 응답 구조 개선, TECH-070` |
| `test` | 테스트 코드 추가/수정 | `test: 게시판 API 유닛 테스트, TECH-080` |
| `chore` | 빌드, 설정 등 기타 작업 | `chore: 의존성 업데이트, TECH-090` |

### 5.3 커밋 메시지 작성 가이드

#### ✅ 좋은 예시
```bash
feature: 등급별 게시판 목록 조회 API 구현, TECH-042
fix: Supabase 연결 에러 처리, TECH-056
docs: 커뮤니티 API 명세서 작성, TECH-060
```

#### ❌ 나쁜 예시
```bash
update  # 타입 없음, Linear ID 없음
수정    # 영어 사용 권장
WIP     # 구체적이지 않음
```

#### 📝 작성 원칙
* **한글 또는 영어** 사용 (팀 내 일관성 유지)
* **현재형 동사** 사용 ("추가함" ❌, "추가" ✅)
* **구체적으로** 작성 ("수정" ❌, "로그인 버그 수정" ✅)
* **Linear ID 필수** 포함

---

## 6. 코드 리뷰 가이드

### 6.1 리뷰어 (PM) 체크리스트

#### 기능 동작
- [ ] 요구사항대로 동작하는가?
- [ ] 예외 처리가 잘 되어 있는가?
- [ ] 에러 메시지가 명확한가?

#### 코드 품질
- [ ] 코드가 읽기 쉬운가?
- [ ] 변수/함수명이 의미 있는가?
- [ ] 중복 코드가 없는가?
- [ ] 주석이 필요한 곳에 있는가?

#### 성능
- [ ] 불필요한 API 호출이 없는가?
- [ ] N+1 쿼리 문제가 없는가?
- [ ] 메모리 누수 가능성이 없는가?

#### 보안
- [ ] 인증/인가가 적절한가?
- [ ] SQL Injection 방지가 되어 있는가?
- [ ] 민감 정보가 노출되지 않는가?

### 6.2 PR 작성자 체크리스트

PR 생성 전 확인:
- [ ] 로컬에서 테스트 완료
- [ ] Lint/Prettier 적용
- [ ] 불필요한 console.log 제거
- [ ] TODO 주석 정리
- [ ] Linear 이슈와 연결

### 6.3 리뷰 코멘트 작성 가이드

#### ✅ 좋은 코멘트 예시
```
✨ 제안: 이 부분은 util 함수로 분리하면 재사용성이 좋을 것 같습니다.

❓ 질문: 왜 Promise.all 대신 for loop을 사용하셨나요?

⚠️ 버그: 이 조건에서 null 체크가 필요할 것 같습니다.

👍 칭찬: 에러 처리가 꼼꼼하네요!
```

#### ❌ 나쁜 코멘트 예시
```
이거 왜 이렇게 했어요?  # 공격적
틀렸습니다.            # 구체적이지 않음
```

---

## 7. 향후 계획

### Phase 1 (현재 - MVP 단계)
```yaml
기간: 2025년 11월 ~ 2026년 1월 (2개월)
팀 규모: 5명
전략: 3 브랜치 전략 (dev → test → main)
특징:
  - dev 브랜치에서 공동 협업
  - Feature 브랜치 없음
  - 빠른 개발 속도 우선
  - Squash and Merge 사용
목표:
  - MVP 완성 및 스마트인재개발원 데모
```

### Phase 2 (MVP 완료 후)
```yaml
조건:
  - 협업 인원 10명 이상
  - 충돌 빈도 일 2-3회 이상
  - 4명 이상이 같은 파일 수정
  - PR당 코드 리뷰 300줄 이상

변경사항:
  - Feature Branch 전략 도입
  - feature/TECH-XXX-기능명 브랜치 생성
  - dev 브랜치에서 통합

브랜치 구조:
  feature/* → dev → test → main
  bugfix/* → dev → test → main
  hotfix/* → main (긴급)
```

### Phase 3 (대규모 확장)
```yaml
조건:
  - 협업 인원 20명 이상
  - PR당 코드 리뷰 500줄 이상

변경사항:
  - Git Flow 전략
  - Release 브랜치 도입
  - 버전 관리 (v1.0.0)

브랜치 구조:
  feature/* → dev → release/* → main
                  ↓
              hotfix/* → main
```

---

## 8. 참고 자료

### 8.1 유용한 Git 명령어

```bash
# 브랜치 확인
git branch -a

# 최신 상태로 업데이트
git fetch origin
git pull origin dev

# 실수로 push한 경우 되돌리기 (로컬만)
git reset --soft HEAD~1

# 특정 커밋으로 되돌리기
git revert <commit-hash>

# 브랜치 삭제
git branch -d feature/old-branch
```

### 8.2 VS Code 추천 확장
* GitLens - Git 히스토리 시각화
* Prettier - 코드 포맷팅
* ESLint - 코드 품질 검사
* GitHub Pull Requests - PR 관리

### 8.3 추가 문서
* [TechBuddy 기획서](./TechBuddy_기획서_v1_3.md)
* [커뮤니티 API 명세서](./커뮤니티_API명세서_v1_0.md) (작성 예정)
* [프로젝트 관리 API 명세서](./프로젝트관리_API명세서_v1_0.md)
* [데이터베이스 스키마](./데이터베이스_스키마_v1_0.md) (작성 예정)

---

## 작성 완료

**문서 버전**: v1.0  
**최종 수정일**: 2025-11-17  
**작성자**: 윤종호

---

## 변경 이력
- 2025-11-17: v1.0 초안 작성 (Linear 'Developer-work-flow' 기반)
